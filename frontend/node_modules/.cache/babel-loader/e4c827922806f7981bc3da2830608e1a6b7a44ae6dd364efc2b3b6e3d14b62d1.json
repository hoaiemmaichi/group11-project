{"ast":null,"code":"import React from'react';import{useSelector}from'react-redux';import{Navigate,Outlet}from'react-router-dom';// Protects routes — redirects to / (home) or /login when not authenticated.\n// Props: requiredRole (optional) e.g. 'admin'\nimport{jsx as _jsx}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{requiredRole}=_ref;const auth=useSelector(state=>state.auth);const token=(auth===null||auth===void 0?void 0:auth.token)||(typeof window!=='undefined'?localStorage.getItem('token'):null);const user=(auth===null||auth===void 0?void 0:auth.user)||(()=>{try{const r=localStorage.getItem('currentUser');return r?JSON.parse(r):null;}catch(e){return null;}})();if(!token||!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}if(requiredRole&&user.role!==requiredRole){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(Outlet,{});}","map":{"version":3,"names":["React","useSelector","Navigate","Outlet","jsx","_jsx","ProtectedRoute","_ref","requiredRole","auth","state","token","window","localStorage","getItem","user","r","JSON","parse","e","to","replace","role"],"sources":["d:/PM MNM/group11-project1/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\n\r\n// Protects routes — redirects to / (home) or /login when not authenticated.\r\n// Props: requiredRole (optional) e.g. 'admin'\r\nexport default function ProtectedRoute({ requiredRole }) {\r\n  const auth = useSelector(state => state.auth);\r\n  const token = auth?.token || (typeof window !== 'undefined' ? localStorage.getItem('token') : null);\r\n  const user = auth?.user || (() => { try { const r = localStorage.getItem('currentUser'); return r ? JSON.parse(r) : null; } catch(e) { return null; } })();\r\n\r\n  if (!token || !user) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  if (requiredRole && user.role !== requiredRole) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,QAAQ,CAAEC,MAAM,KAAQ,kBAAkB,CAEnD;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAmB,IAAlB,CAAEC,YAAa,CAAC,CAAAD,IAAA,CACrD,KAAM,CAAAE,IAAI,CAAGR,WAAW,CAACS,KAAK,EAAIA,KAAK,CAACD,IAAI,CAAC,CAC7C,KAAM,CAAAE,KAAK,CAAG,CAAAF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEE,KAAK,IAAK,MAAO,CAAAC,MAAM,GAAK,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,IAAI,CAAC,CACnG,KAAM,CAAAC,IAAI,CAAG,CAAAN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,IAAI,GAAI,CAAC,IAAM,CAAE,GAAI,CAAE,KAAM,CAAAC,CAAC,CAAGH,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAE,MAAO,CAAAE,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACF,CAAC,CAAC,CAAG,IAAI,CAAE,CAAE,MAAMG,CAAC,CAAE,CAAE,MAAO,KAAI,CAAE,CAAE,CAAC,EAAE,CAAC,CAE1J,GAAI,CAACR,KAAK,EAAI,CAACI,IAAI,CAAE,CACnB,mBAAOV,IAAA,CAACH,QAAQ,EAACkB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CAEA,GAAIb,YAAY,EAAIO,IAAI,CAACO,IAAI,GAAKd,YAAY,CAAE,CAC9C,mBAAOH,IAAA,CAACH,QAAQ,EAACkB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CAEA,mBAAOhB,IAAA,CAACF,MAAM,GAAE,CAAC,CACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}