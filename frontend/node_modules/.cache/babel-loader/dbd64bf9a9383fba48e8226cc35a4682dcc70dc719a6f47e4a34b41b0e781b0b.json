{"ast":null,"code":"var _jsxFileName = \"D:\\\\PM MNM\\\\group11-project1\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Navigate, Outlet } from 'react-router-dom';\n\n// Protects routes — redirects to / (home) or /login when not authenticated.\n// Props: requiredRole (optional) e.g. 'admin'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProtectedRoute({\n  requiredRole\n}) {\n  _s();\n  const auth = useSelector(state => state.auth);\n  const token = (auth === null || auth === void 0 ? void 0 : auth.token) || (typeof window !== 'undefined' ? localStorage.getItem('token') : null);\n  const user = (auth === null || auth === void 0 ? void 0 : auth.user) || (() => {\n    try {\n      const r = localStorage.getItem('currentUser');\n      return r ? JSON.parse(r) : null;\n    } catch (e) {\n      return null;\n    }\n  })();\n  if (!token || !user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 12\n    }, this);\n  }\n  if (requiredRole && user.role !== requiredRole) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 10\n  }, this);\n}\n_s(ProtectedRoute, \"SvwR9yfdOSlAizXx+1ujAxpoAFQ=\", false, function () {\n  return [useSelector];\n});\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","useSelector","Navigate","Outlet","jsxDEV","_jsxDEV","ProtectedRoute","requiredRole","_s","auth","state","token","window","localStorage","getItem","user","r","JSON","parse","e","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","role","_c","$RefreshReg$"],"sources":["D:/PM MNM/group11-project1/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\n\r\n// Protects routes — redirects to / (home) or /login when not authenticated.\r\n// Props: requiredRole (optional) e.g. 'admin'\r\nexport default function ProtectedRoute({ requiredRole }) {\r\n  const auth = useSelector(state => state.auth);\r\n  const token = auth?.token || (typeof window !== 'undefined' ? localStorage.getItem('token') : null);\r\n  const user = auth?.user || (() => { try { const r = localStorage.getItem('currentUser'); return r ? JSON.parse(r) : null; } catch(e) { return null; } })();\r\n\r\n  if (!token || !user) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  if (requiredRole && user.role !== requiredRole) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;;AAEnD;AACA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,eAAe,SAASC,cAAcA,CAAC;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EACvD,MAAMC,IAAI,GAAGR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACD,IAAI,CAAC;EAC7C,MAAME,KAAK,GAAG,CAAAF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,KAAK,MAAK,OAAOC,MAAM,KAAK,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;EACnG,MAAMC,IAAI,GAAG,CAAAN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,IAAI,KAAI,CAAC,MAAM;IAAE,IAAI;MAAE,MAAMC,CAAC,GAAGH,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MAAE,OAAOE,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACF,CAAC,CAAC,GAAG,IAAI;IAAE,CAAC,CAAC,OAAMG,CAAC,EAAE;MAAE,OAAO,IAAI;IAAE;EAAE,CAAC,EAAE,CAAC;EAE1J,IAAI,CAACR,KAAK,IAAI,CAACI,IAAI,EAAE;IACnB,oBAAOV,OAAA,CAACH,QAAQ;MAACkB,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;EAEA,IAAIlB,YAAY,IAAIQ,IAAI,CAACW,IAAI,KAAKnB,YAAY,EAAE;IAC9C,oBAAOF,OAAA,CAACH,QAAQ;MAACkB,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;EAEA,oBAAOpB,OAAA,CAACF,MAAM;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnB;AAACjB,EAAA,CAduBF,cAAc;EAAA,QACvBL,WAAW;AAAA;AAAA0B,EAAA,GADFrB,cAAc;AAAA,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}